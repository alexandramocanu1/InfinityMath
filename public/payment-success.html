<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Plată Finalizată - Infinity Math</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem;
    }

    .success-container {
      background: white;
      border-radius: 16px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.15);
      overflow: hidden;
      max-width: 600px;
      width: 100%;
      text-align: center;
    }

    .success-header {
      background: #10b981;
      color: white;
      padding: 3rem 2rem 2rem;
      position: relative;
    }

    .success-icon {
      width: 80px;
      height: 80px;
      background: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 1.5rem;
      font-size: 2.5rem;
    }

    .success-header h1 {
      font-size: 2rem;
      margin-bottom: 0.5rem;
      font-weight: 600;
    }

    .success-header p {
      font-size: 1.1rem;
      opacity: 0.95;
      line-height: 1.4;
    }

    .success-body {
      padding: 2.5rem 2rem;
    }

    .payment-details {
      background: #f8fafc;
      border: 1px solid #e2e8f0;
      border-radius: 12px;
      padding: 2rem;
      margin-bottom: 2rem;
      text-align: left;
    }

    .payment-details h3 {
      color: #2d3748;
      margin-bottom: 1.5rem;
      font-size: 1.2rem;
      text-align: center;
    }

    .detail-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
      padding: 0.75rem 0;
      border-bottom: 1px solid #e2e8f0;
    }

    .detail-row:last-child {
      margin-bottom: 0;
      border-bottom: none;
      font-weight: 600;
      color: #10b981;
      font-size: 1.1rem;
    }

    .detail-label {
      color: #4a5568;
      font-weight: 500;
    }

    .detail-value {
      color: #2d3748;
      font-weight: 500;
    }

    .next-steps {
      background: #f0f9ff;
      border: 1px solid #bae6fd;
      border-radius: 12px;
      padding: 2rem;
      margin-bottom: 2rem;
    }

    .next-steps h3 {
      color: #0369a1;
      margin-bottom: 1rem;
      font-size: 1.1rem;
    }

    .next-steps ul {
      text-align: left;
      color: #0c4a6e;
      line-height: 1.6;
    }

    .next-steps li {
      margin-bottom: 0.5rem;
    }

    .action-buttons {
      display: flex;
      gap: 1rem;
      justify-content: center;
      flex-wrap: wrap;
    }

    .btn {
      padding: 1rem 2rem;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      border: none;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }

    .btn-primary {
      background: #10b981;
      color: white;
    }

    .btn-primary:hover {
      background: #059669;
      transform: translateY(-1px);
    }

    .btn-secondary {
      background: #f7fafc;
      color: #4a5568;
      border: 2px solid #e2e8f0;
    }

    .btn-secondary:hover {
      background: #edf2f7;
      border-color: #cbd5e0;
    }

    .test-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: #fef3c7;
      color: #92400e;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      font-size: 0.875rem;
      font-weight: 500;
      margin-bottom: 1rem;
    }

    @media (max-width: 640px) {
      .success-header {
        padding: 2rem 1rem 1.5rem;
      }

      .success-header h1 {
        font-size: 1.5rem;
      }

      .success-body {
        padding: 2rem 1rem;
      }

      .action-buttons {
        flex-direction: column;
      }

      .btn {
        width: 100%;
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  <div class="success-container">
    <div class="success-header">
      <div class="success-icon">
        ✅
      </div>
      <h1>Plata Finalizată cu Succes!</h1>
      <p>Felicitări! Înscrierea ta la cursul Infinity Math a fost confirmată.</p>
    </div>

    <div class="success-body">
      <div id="testBadge" class="test-badge" style="display: none;">
        🧪 Plată de Test - Nu au fost procesați bani reali
      </div>

      <div class="payment-details">
        <h3>Detaliile Plății</h3>
        <div class="detail-row">
          <span class="detail-label">Numărul comenzii:</span>
          <span class="detail-value" id="orderIdDisplay">-</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Data plății:</span>
          <span class="detail-value" id="paymentDateDisplay">-</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Serviciu:</span>
          <span class="detail-value">Curs Infinity Math</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Suma plătită:</span>
          <span class="detail-value" id="amountDisplay">- RON</span>
        </div>
      </div>

      <div class="next-steps">
        <h3>Pașii următori</h3>
        <ul>
          <li><strong>Email de confirmare:</strong> Vei primi un email cu detaliile cursului în următoarele minute</li>
          <li><strong>Acces la curs:</strong> Link-ul către platformă va fi disponibil în contul tău în 24 de ore</li>
          <li><strong>Primul curs:</strong> Programul tău săptămânal începe conform orarului selectat</li>
          <li><strong>Suport tehnic:</strong> Pentru întrebări, ne poți contacta oricând</li>
        </ul>
      </div>

      <div class="action-buttons">
        <a href="/" class="btn btn-primary">
          🏠 Înapoi la Pagina Principală
        </a>
        <a href="/profile" class="btn btn-secondary">
          👤 Vezi Profilul Meu
        </a>
      </div>
    </div>
  </div>

  <script>
    // Extrage parametrii din URL
    const urlParams = new URLSearchParams(window.location.search);
    const orderId = urlParams.get('orderId') || 'ORDER-UNKNOWN';
    const amount = urlParams.get('amount') || '240';
    const isTest = urlParams.get('test') === 'true';

    // Populează detaliile
    document.getElementById('orderIdDisplay').textContent = orderId;
    document.getElementById('amountDisplay').textContent = `${amount} RON`;
    document.getElementById('paymentDateDisplay').textContent = 
      new Date().toLocaleDateString('ro-RO', {
        year: 'numeric',
        month: 'long',
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
      });

    // Arată badge-ul de test dacă este cazul
    if (isTest) {
      document.getElementById('testBadge').style.display = 'flex';
    }

    // Auto-redirect la profil după 30 de secunde
    let countdown = 30;
    const updateCountdown = () => {
      const profileBtn = document.querySelector('a[href="/profile"]');
      if (profileBtn && countdown > 0) {
        profileBtn.innerHTML = `👤 Vezi Profilul Meu (${countdown}s)`;
        countdown--;
        setTimeout(updateCountdown, 1000);
      } else if (profileBtn) {
        profileBtn.innerHTML = '👤 Vezi Profilul Meu';
        // window.location.href = '/profile'; // Uncomment pentru auto-redirect
      }
    };

    // Începe countdown-ul după 5 secunde
    setTimeout(updateCountdown, 5000);

    // Salvează datele în localStorage pentru debugging
    try {
      const paymentResult = {
        orderId: orderId,
        amount: amount,
        status: 'success',
        timestamp: new Date().toISOString(),
        isTest: isTest
      };
      
      console.log('Payment completed successfully:', paymentResult);
      
      // Poți trimite analytics sau alte tracking-uri aici
    } catch (error) {
      console.error('Error saving payment result:', error);
    }
  </script>
</body>
</html>